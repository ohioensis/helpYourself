# Основы JavaScript

[Критерии для проверки](https://github.com/htmlacademy/intensive-javascript-criteria/blob/master/index.md) проекта Базового интенсива по JavaScript от HTML-академии

(Приведенные цитаты — из неподражаемого [учебника](http://learn.javascript.ru/) Ильи Кантора)

`"use strict";` — директива, которую нужно объявлять в начале проекта, чтобы использовать стандарт ES5. Не поддерживается IE9 и ниже. Также можно указывать в начале функций, тогда строгий режим будет поддерживаться только внутри функции.

**Имена переменных** могут содержать буквы, цифры, символы `$` и `_` (только эти, никаких обычных дефисов!). Первый символ **не должен быть цифрой**. Регистр букв имеет значение.

**Константы** (переменные, значения которых не меняются) принято объявлять заглавными буквами через подчеркивание, например, так:

```
var COLOR_RED = "#F00";
```
> Технически, константа является обычной переменной, то есть её можно изменить. Но мы договариваемся этого не делать.

### Правила именования

- Никакого транслита. Только английский.
- Короткие имена (одна-две буквы) подходят только для переменных совсем местного значения.
- Принятый стандарт переменных из нескольких слов — camelCase.
- Имя переменной должно максимально точно соответствовать тому, что в ней лежит.

> Если мы ищем переменную с одним именем, а находим – с другим, то зачастую самый лучший ход – это переименовать переменную, чтобы имя было тем, которое вы искали.

### Основные операторы

**Операнд** – то, к чему применяется оператор. Например, `5 * 2` - оператор умножения с левым и правым операндами.

Операторы бывают **унарные** (например, знак минус перед числом) и **бинарные** (применяются к двум операндам).

При сложении (использовании оператора `+`) следует помнить:

> Если хотя бы один аргумент является строкой, то второй будет также преобразован к строке!

**Унарный плюс** используют, чтобы преобразовать строки в числа. Например:

```
var apples = "2";
var oranges = "3";

alert( +apples + +oranges );
```
Программа выведет `5`, а если бы не преобразовали, то вывела бы `23`, потому что изначально введены строки.

**Приоритет выполнения операторов** можно посмотреть в специальной [таблице приоритетов](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence).

**Оператор взятия остатка — %**. Его результат — остаток от деления левого операнда на правый операнд.

**Инкремент и декремент** — это `++` и `--`. 

> Инкремент/декремент можно применить только к переменной. Код 5++ даст ошибку.

Между `i++` и `++i` есть разница, если результат уменьшения или увеличения переменной нужно использовать в том же выражении.

> Вызов ++i увеличит переменную, а затем вернёт ее значение в a. Так что в a попадёт значение i **после увеличения**. Постфиксная форма i++ отличается от префиксной ++i тем, что возвращает **старое значение, бывшее до увеличения**.

**Сокращенная арифметика с присваиванием**:

`n = n + 5;` можно записать как `n += 5;`

Приоритет оператора с присваиванием такой же, как и простого присваивания (выполняется **в последнюю очередь**).

**Оператор запятая** — ее приоритет ниже, чем у присваивания.

> Запятая позволяет перечислять выражения, разделяя их запятой ','. Каждое из них – вычисляется и отбрасывается, за исключением последнего, которое возвращается.

Зачем же нужен такой оператор?

> Обычно он используется в составе более сложных конструкций, чтобы сделать несколько действий в одной строке. 

### Операторы сравнения и логические операторы

Побуквенное сравнение строк называется **лексикографическим**. Больше та строка, в которой первая буква идет позже по алфавиту. Если буквы одинаковые — сравниваются вторые и так далее. Строчные буквы больше прописных. Если числа представлены в виде строк, они сравниваются посимвольно. Пустота меньше, чем любая буква или цифра, поэтому "12" будет больше "1", а "хрюк" будет больше, чем "хрю".

> При сравнении значений разных типов, используется числовое преобразование. Оно применяется к обоим значениям.

Если мы этого не хотим, а хотим сравнивать строго, то используем операторы `===` или `!==`.

> Любые сравнения с undefined/null, кроме точного `===`, следует делать с осторожностью. Желательно не использовать сравнения `>=` `>` `<` `<=` с ними, во избежание ошибок в коде.

### Оператор if

Синтаксис:

```
if (условие) {...если условие верно, выполняется код в фигурных скобках}
```

Необязательный блок `else` — выполняется, если условие неверно. Если нужно проверить несколько вариантов, используется `else if`

```
var year = prompt("В каком году Гагарин полетел в космос?", "");
if (year < 1961) {
	alert("Рановато...");
} else if (year > 1961) {
	alert("Слишком поздно, попробуйте еще разок...");
} else {
	alert("Именно! В 1961 году Гагарин полетел в космос!");
}
```

### Логические операторы

Оператор или `||` вычисляет значения до первого true, а остальные игнорирует (если там дальше идёт присваивание, он его проигнорирует).

> Итак, оператор || вычисляет операнды слева направо до первого «истинного» и возвращает его, а если все ложные – то последнее значение.

Оператор и `&&` возвращает `true`, если оба условия истинны (если оба ложны или хотя бы одно — `false`).

> Итак, оператор && вычисляет операнды слева направо до первого «ложного» и возвращает его, а если все истинные – то последнее значение.

Оператор не `!=` приводит аргумент к логическому типу и возвращает противоположное значение.

### Циклы while

```
var i=0;
while(i<3) {
  alert(i);
  i++;
}
```
То же самое с помощью `do ... while`:

```
var i = 0;
do {
  alert(i);
  i++;
} while (i < 3);
```
Но такой синтаксис редко используется, просто `while` лучше читается.

### Циклы for

```
for (начало; условие; шаг) {
	... тело цикла ...
}
```
Та же операция с помощью цикла `for`:

```
var i;
for(i = 0; i < 3; i++) {
	alert(i);
}
```

> Цикл выполняется так:
>1) Начало: i=0 выполняется один-единственный раз, при заходе в цикл.
>2) Условие: i<3 проверяется перед каждой итерацией и при входе в цикл, если оно нарушено, то происходит выход.
>3) Тело: alert(i).
>4) Шаг: i++ выполняется после тела на каждой итерации, но перед проверкой условия.
>5) Идти на шаг 2.

### Прерывание цикла break

`break` внутри цикла полностью его прерывает и передает управление на строку **за телом цикла**.

`continue` внутри цикла прерывает текущую итерацию, цикл возобновляется с шага 4.

Если один цикл находится внутри другого, а выйти нужно из обоих, необходимо поставить **уникальную** метку вида `имя: ` перед началом внешнего цикла и ее же указать внутри, рядом с `break` или `continue`.

> Заметим, что метки не позволяют прыгнуть в произвольное место кода, в JavaScript нет такой возможности.

### Конструкция switch

Заменяет собой перебор нескольких if:

```
switch(x) {
  case 'value1':  // if (x === 'value1')
    ...
    [break]

  case 'value2':  // if (x === 'value2')
    ...
    [break]

  default:
    ...
    [break]
}
```
Пример использования:

```
var a = prompt("Угадайте число от 1 до 10", "");

switch (a) {
	case "1":
	case "2":
	case "3":
	  alert("Маловато!");
	  break;
	case "4":
	  alert("В точку!");
	  break;
	case "5":
	case "6":
	case "7":
	case "8":
	case "9":
	case "10":
	  alert("Перебор!");
	  break;
	default: 
	  alert("Неизвестное значение");
}
```
> Оператор switch предполагает строгое равенство ===

Поэтому нужно помнить про тип значения (если ввод `prompt` указывать напротив `case` строку, а не число)

## Функции

```
function showMessage() {
  alert( 'Привет всем присутствующим!' );
}

showMessage();
showMessage();
```

> Вначале идет ключевое слово function, после него имя функции, затем список параметров в скобках (в примере выше он пустой) и тело функции – код, который выполняется при её вызове.

> Главная цель создания функций: избавление от дублирования кода.

**Важно** помнить, что

> Функция может содержать локальные переменные, объявленные через var. Такие переменные видны только внутри функции.

При этом

> Блоки if/else, switch, for, while, do..while не влияют на область видимости переменных. При объявлении переменной в таких блоках, она всё равно будет видна во всей функции.

Функция может с помощью `return` возвратить результат, который будет передан в вызвавший её код.

Пример: функция расчета дискриминанта по параметрам:

```
function calcD(a, b, c) {
	return b*b - 4*a*c;
}

var a = +prompt("Введите a", "");
var b = +prompt("Введите b", "");
var c = +prompt("Введите c", ""); 

var test = calcD(a, b, c);
alert("Дискриминант равен " + test);
```
> Функции, которые начинаются с "show" – что-то показывают:

`showMessage(..)`     // префикс show, "показать" сообщение

> Функции, начинающиеся с "get" – получают, и т.п.:

`getAge(..)`       // get, "получает" возраст
`calcD(..)`           // calc, "вычисляет" дискриминант
`createForm(..)`     // create, "создает" форму
`checkPermission(..)` // check, "проверяет" разрешение, возвращает true/false